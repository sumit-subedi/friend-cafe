{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/sumit/djreact/restaurant/frontend/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useAlert } from 'react-alert';\nimport { useHistory } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\nimport Cookies from 'js-cookie';\n\nconst Login = props => {\n  _s();\n\n  var history = useHistory();\n  const [cookies, setCookie] = useCookies(['username']);\n  useEffect(() => {\n    let url = 'http://localhost:8000/login';\n    console.log(Cookies.get('username'));\n    fetch(url, {\n      credentials: 'same-origin',\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    });\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let url = 'http://localhost:8000/login';\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: e.target.name.value,\n        password: e.target.pass.value\n      })\n    }).then(response => {\n      if (response['ok']) {\n        let expires = new Date();\n        expires.setTime(expires.getTime() + 30 * 60);\n        setCookie('username', e.target.name.value, {\n          path: '/',\n          expires\n        });\n        history.push(\"/menu\");\n      } else {\n        alert.show('There was an error !!!', {\n          type: 'error'\n        });\n      }\n    });\n  };\n\n  const alert = useAlert();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"User name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"pass\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(Login, \"nAzhcGCHmaYhaCQYJHmuMvJxmt0=\", false, function () {\n  return [useHistory, useCookies, useAlert];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/sumit/djreact/restaurant/frontend/src/components/Login.js"],"names":["React","useEffect","useAlert","useHistory","useCookies","Cookies","Login","props","history","cookies","setCookie","url","console","log","get","fetch","credentials","method","headers","Accept","handleSubmit","e","preventDefault","body","JSON","stringify","name","target","value","password","pass","then","response","expires","Date","setTime","getTime","path","push","alert","show","type"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,UAAT,QAA0B,kBAA1B;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAOC,OAAP,MAAoB,WAApB;;AACA,MAAMC,KAAK,GAAIC,KAAD,IAAW;AAAA;;AACvB,MAAIC,OAAO,GAAGL,UAAU,EAAxB;AACA,QAAM,CAACM,OAAD,EAAUC,SAAV,IAAuBN,UAAU,CAAC,CAAC,UAAD,CAAD,CAAvC;AACAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIU,GAAG,GAAG,6BAAV;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYR,OAAO,CAACS,GAAR,CAAY,UAAZ,CAAZ;AACAC,IAAAA,KAAK,CAACJ,GAAD,EAAM;AACTK,MAAAA,WAAW,EAAE,aADJ;AAETC,MAAAA,MAAM,EAAE,MAFC;AAGTC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT;AAHA,KAAN,CAAL;AASD,GAZQ,EAYN,EAZM,CAAT;;AAcA,QAAMC,YAAY,GAAIC,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIX,GAAG,GAAG,6BAAV;AAEAI,IAAAA,KAAK,CAAEJ,GAAF,EAAO;AACVM,MAAAA,MAAM,EAAG,MADC;AAEVC,MAAAA,OAAO,EAAG;AACR,wBAAiB;AADT,OAFA;AAKVK,MAAAA,IAAI,EAAGC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,IAAI,EAAGL,CAAC,CAACM,MAAF,CAASD,IAAT,CAAcE,KAAtB;AAA6BC,QAAAA,QAAQ,EAAGR,CAAC,CAACM,MAAF,CAASG,IAAT,CAAcF;AAAtD,OAAf;AALG,KAAP,CAAL,CAMGG,IANH,CAMUC,QAAD,IAAc;AACrB,UAAIA,QAAQ,CAAC,IAAD,CAAZ,EAAmB;AACjB,YAAIC,OAAO,GAAG,IAAIC,IAAJ,EAAd;AACJD,QAAAA,OAAO,CAACE,OAAR,CAAgBF,OAAO,CAACG,OAAR,KAAoB,KAAG,EAAvC;AACI1B,QAAAA,SAAS,CAAC,UAAD,EAAaW,CAAC,CAACM,MAAF,CAASD,IAAT,CAAcE,KAA3B,EAAkC;AAAES,UAAAA,IAAI,EAAE,GAAR;AAAcJ,UAAAA;AAAd,SAAlC,CAAT;AACAzB,QAAAA,OAAO,CAAC8B,IAAR,CAAa,OAAb;AACD,OALD,MAMI;AACFC,QAAAA,KAAK,CAACC,IAAN,CAAW,wBAAX,EAAqC;AAACC,UAAAA,IAAI,EAAG;AAAR,SAArC;AACD;AAEF,KAjBD;AAkBD,GAtBD;;AAuBA,QAAMF,KAAK,GAAGrC,QAAQ,EAAtB;AAGA,sBACE;AAAA,2BACA;AAAM,MAAA,QAAQ,EAAIkB,YAAlB;AAAA,8BAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE;AAAO,QAAA,IAAI,EAAG,MAAd;AAAqB,QAAA,IAAI,EAAG;AAA5B;AAAA;AAAA;AAAA;AAAA,cAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,eAME;AAAO,QAAA,IAAI,EAAG,MAAd;AAAqB,QAAA,IAAI,EAAG;AAA5B;AAAA;AAAA;AAAA;AAAA,cANF,eAQE;AAAO,QAAA,IAAI,EAAG;AAAd;AAAA;AAAA;AAAA;AAAA,cARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADA,mBADF;AAcD,CAzDD;;GAAMd,K;UACUH,U,EACeC,U,EAsCfF,Q;;;KAxCVI,K;AA2DN,eAAeA,KAAf","sourcesContent":["import React, { useEffect} from 'react';\nimport { useAlert } from 'react-alert';\nimport { useHistory} from 'react-router-dom';\nimport { useCookies } from 'react-cookie'\nimport Cookies from 'js-cookie';\nconst Login = (props) => {\n  var history = useHistory();\n  const [cookies, setCookie] = useCookies(['username'])\n  useEffect(() => {\n    let url = 'http://localhost:8000/login'\n    console.log(Cookies.get('username'));\n    fetch(url, {\n      credentials: 'same-origin',\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      \n    })\n  }, [])\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    let url = 'http://localhost:8000/login'\n    \n    fetch (url, {\n      method : 'POST',\n      headers : {\n        'Content-type' : 'application/json',\n      },\n      body : JSON.stringify({name : e.target.name.value, password : e.target.pass.value})\n    }).then ((response) => {\n      if (response['ok']){\n        let expires = new Date()\n    expires.setTime(expires.getTime() + 30*60)\n        setCookie('username', e.target.name.value, { path: '/',  expires })\n        history.push(\"/menu\");\n      }\n      else{\n        alert.show('There was an error !!!', {type : 'error'})\n      }\n\n    })\n  };\n  const alert = useAlert()\n\n\n  return (\n    <>\n    <form onSubmit = {handleSubmit} >\n\n\n      <label >User name:</label>\n      <input type = 'text' name = 'name'/>\n      <label>Password</label>\n      <input type = 'text' name = 'pass'/>\n\n      <input type = 'submit' />\n    </form>\n    </>\n  )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}